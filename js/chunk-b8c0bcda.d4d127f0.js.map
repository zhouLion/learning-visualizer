{"version":3,"sources":["webpack:///./src/views/articles/canvas/chapterC03P03.vue?f648","webpack:///./src/views/articles/canvas/assets/lena.jpeg","webpack:///./src/views/articles/canvas/chapterC03P03.vue?8058","webpack:///./src/views/articles/canvas/chapterC03P03.vue?6cb9","webpack:///./src/views/articles/canvas/chapterC03P03.vue?a09b","webpack:///./src/views/articles/canvas/chapterC03P03.vue?1295"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","_m","ref","attrs","canvasSize","width","height","on","onmousemove","staticRenderFns","extend","data","scale","hoverColor","mounted","canvas","$refs","loadImgToCanvas","defaultCanvas","setCanvasSmoothingEnable","smoothCanvas","methods","src","img","Image","crossOrigin","onload","ctx","getContext","drawImage","onerror","error","console","log","smoothingEnable","imageSmoothingEnabled","evt","target","xy","x","layerX","y","layerY","drawCanvasZoom","source","sourceCtx","targetCtx","Math","min","max","component"],"mappings":"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","file":"js/chunk-b8c0bcda.d4d127f0.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chapterC03P03.vue?vue&type=style&index=0&id=b840bfb2&scoped=true&lang=less&\"","module.exports = __webpack_public_path__ + \"img/lena.be661704.jpeg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"canvas - 图片处理\")]),_c('h3',[_vm._v(\"抗锯齿\")]),_c('table',{staticClass:\"canvas-demo-table\"},[_vm._m(0),_vm._m(1),_c('tbody',[_c('tr',[_c('td',[_c('canvas',{ref:\"canvas\",attrs:{\"width\":_vm.canvasSize.width,\"height\":_vm.canvasSize.height},on:{\"mousemove\":_vm.onmousemove}})]),_c('td',[_c('canvas',{ref:\"defaultCanvas\",attrs:{\"width\":\"100\",\"height\":\"100\"}})]),_c('td',[_c('canvas',{ref:\"smoothCanvas\",attrs:{\"width\":\"100\",\"height\":\"100\"}})])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('colgroup',[_c('col',{attrs:{\"width\":\"33%\"}}),_c('col',{attrs:{\"width\":\"33%\"}}),_c('col',{attrs:{\"width\":\"33%\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"图片\")]),_c('th',[_vm._v(\"默认画布\")]),_c('th',[_vm._v(\"抗锯齿画布\")])])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport lena from './assets/lena.jpeg';\n\nexport default Vue.extend({\n  data() {\n    return {\n      canvasSize: {\n        width: 400,\n        height: 400,\n      },\n      scale: 1,\n      hoverColor: '',\n    };\n  },\n  mounted() {\n    const canvas = this.$refs.canvas as HTMLCanvasElement;\n    this.loadImgToCanvas(lena, canvas);\n    // 默认的画布\n    const defaultCanvas = this.$refs.defaultCanvas as HTMLCanvasElement;\n    this.setCanvasSmoothingEnable(defaultCanvas, false);\n    // 要设置抗锯齿的画布\n    const smoothCanvas = this.$refs.smoothCanvas as HTMLCanvasElement;\n    this.setCanvasSmoothingEnable(smoothCanvas, true);\n  },\n  methods: {\n    loadImgToCanvas(src: string, canvas: HTMLCanvasElement) {\n      const img = new Image();\n      const { width, height } = this.canvasSize;\n      img.src = src;\n      img.width = width;\n      img.height = height;\n      img.crossOrigin = 'cors';\n      img.onload = () => {\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n          ctx.drawImage(img, 0, 0, width, height);\n        }\n      };\n      img.onerror = error => console.log(error);\n    },\n\n    setCanvasSmoothingEnable(\n      canvas: HTMLCanvasElement,\n      smoothingEnable = false,\n    ) {\n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        ctx.imageSmoothingEnabled = smoothingEnable;\n      }\n    },\n\n    onmousemove(evt: any) {\n      const target = evt.target as HTMLCanvasElement;\n      // 默认的画布\n      const defaultCanvas = this.$refs.defaultCanvas as HTMLCanvasElement;\n      // 抗锯齿的画布\n      const smoothCanvas = this.$refs.smoothCanvas as HTMLCanvasElement;\n\n      const xy = {\n        x: evt.layerX,\n        y: evt.layerY,\n      };\n\n      this.drawCanvasZoom(target, defaultCanvas, xy);\n      this.drawCanvasZoom(target, smoothCanvas, xy);\n    },\n\n    drawCanvasZoom(\n      source: HTMLCanvasElement,\n      target: HTMLCanvasElement,\n      xy: { x: number; y: number },\n    ) {\n      const sourceCtx = source.getContext('2d');\n      const targetCtx = target.getContext('2d');\n      const { x, y } = xy;\n      if (sourceCtx && targetCtx) {\n        targetCtx.drawImage(\n          source,\n          Math.min(Math.max(0, x - 5), source.width - 10),\n          Math.min(Math.max(0, y - 5), source.height - 10),\n          10, 10,\n          0, 0,\n          100, 100,\n        );\n      }\n    },\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chapterC03P03.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chapterC03P03.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./chapterC03P03.vue?vue&type=template&id=b840bfb2&scoped=true&\"\nimport script from \"./chapterC03P03.vue?vue&type=script&lang=ts&\"\nexport * from \"./chapterC03P03.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./chapterC03P03.vue?vue&type=style&index=0&id=b840bfb2&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b840bfb2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}