(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228c34"],{db22:function(s,a,n){"use strict";n.r(a),a["default"]='<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Canvas 基础交互：<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>3. 旋转 rotate<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>ctx.rotate(rad: number)<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>会控制 Canvas 元素以指定的角度旋转，旋转时需要通过\n      <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>ctx.translate(x: number, y: number)<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> 指定旋转原点。\n    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>\n      其中\n      <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>ctx.translate(x: number, y: number)<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> 需要特别注意，如果不设置，默认值将会是\n      <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>0， 0<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">q-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;rotateHandler&quot;</span>&gt;</span>旋转<span class="hljs-tag">&lt;/<span class="hljs-name">q-button</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;300&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;300&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;canvasToRotate&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>\n\n    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>\n\n    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>4. 将 canvas 保存为图片文件<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>\n      利用\n      <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>canvas.toDataURL(type: string, quality?: number)<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> 方法，可以将画布转换为图片文件链接。\n    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>试着改变一下表单中的参数，触发「生成图片」<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>文件类型：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;type&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;type&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;saveHandler&quot;</span>&gt;</span>\n            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;image/png&quot;</span>&gt;</span>image/png<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>\n            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;image/jpeg&quot;</span>&gt;</span>image/jpeg<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>\n          <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>文件质量：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">input</span>\n            <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;range&quot;</span>\n            <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;quality&quot;</span>\n            <span class="hljs-attr">step</span>=<span class="hljs-string">&quot;0.1&quot;</span>\n            <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;quality&quot;</span>\n            <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;0.1&quot;</span>\n            <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;1&quot;</span>\n            @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;saveHandler&quot;</span>\n          /&gt;</span>\n          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ quality }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imageURL&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;img&quot;</span> /&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;imageURL&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;imageURL&quot;</span> <span class="hljs-attr">download</span>&gt;</span>下载 {{ imageFileSize }}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>\n      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript">\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>({\n  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">imageURL</span>: <span class="hljs-string">&#x27;&#x27;</span>,\n      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;image/png&#x27;</span>,\n      <span class="hljs-attr">quality</span>: <span class="hljs-number">1</span>,\n    };\n  },\n  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">draw</span>();\n  },\n  <span class="hljs-attr">computed</span>: {\n    <span class="hljs-comment">// return human readable file size</span>\n    <span class="hljs-title function_">imageFileSize</span>(): string {\n      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${(<span class="hljs-variable language_">this</span>.imageURL.length / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span>KB`</span>;\n    },\n  },\n  <span class="hljs-attr">methods</span>: {\n    <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">canvasToRotate</span> <span class="hljs-keyword">as</span> HTMLCanvasElement;\n      <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>);\n      <span class="hljs-keyword">if</span> (ctx) {\n        <span class="hljs-keyword">const</span> ox = canvas.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;\n        <span class="hljs-keyword">const</span> oy = canvas.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;\n        ctx.<span class="hljs-property">font</span> = <span class="hljs-string">&#x27;40px serif&#x27;</span>;\n        ctx.<span class="hljs-property">textAlign</span> = <span class="hljs-string">&#x27;center&#x27;</span>;\n        ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">&#x27;middle&#x27;</span>;\n        ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&#x27;#f00&#x27;</span>;\n        ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">&#x27;祝大家中秋快乐&#x27;</span>, ox, oy);\n      }\n    },\n\n    <span class="hljs-title function_">rotateHandler</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">canvasToRotate</span> <span class="hljs-keyword">as</span> HTMLCanvasElement;\n      <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&#x27;2d&#x27;</span>);\n      <span class="hljs-keyword">if</span> (ctx) {\n        <span class="hljs-keyword">const</span> ox = canvas.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>;\n        <span class="hljs-keyword">const</span> oy = canvas.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;\n        ctx.<span class="hljs-title function_">translate</span>(ox, oy);\n        <span class="hljs-comment">// 在 canvas 中，与圆弧、旋转相关的，都是用弧度来表示的。</span>\n        ctx.<span class="hljs-title function_">rotate</span>((<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>) * <span class="hljs-number">15</span>);\n        ctx.<span class="hljs-title function_">fillText</span>(<span class="hljs-string">&#x27;祝大家中秋快乐&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);\n        <span class="hljs-comment">// 将 translate 重置回来</span>\n        ctx.<span class="hljs-title function_">translate</span>(-ox, -oy);\n      }\n    },\n\n    <span class="hljs-title function_">saveHandler</span>(<span class="hljs-params"></span>) {\n      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">canvasToRotate</span> <span class="hljs-keyword">as</span> HTMLCanvasElement;\n      <span class="hljs-keyword">const</span> { type, quality } = <span class="hljs-variable language_">this</span>;\n      <span class="hljs-keyword">const</span> imageURL = canvas.<span class="hljs-title function_">toDataURL</span>(type, quality);\n      <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageURL</span> = imageURL;\n    },\n  },\n});\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n'}}]);
//# sourceMappingURL=chunk-2d228c34.cbdf7996.js.map