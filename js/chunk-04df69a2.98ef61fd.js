(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04df69a2"],{"07aa":function(t,e,n){"use strict";n("c0a9")},"14d9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"demo-whiteboard"},[n("canvas",{ref:"canvas",attrs:{width:"400",height:"400"}}),n("div",{staticClass:"actions"},[n("svg",{staticClass:"icon",class:{active:!t.eraserEnabled},on:{click:t.brushHandler}},[n("use",{attrs:{"xlink:href":"#icon-Pencil"}})]),n("svg",{staticClass:"icon",class:{active:t.eraserEnabled},on:{click:t.eraserHandler}},[n("use",{attrs:{"xlink:href":"#icon-eraser"}})]),n("svg",{staticClass:"icon",on:{click:t.downloadHandler}},[n("use",{attrs:{"xlink:href":"#icon-save"}})]),n("svg",{staticClass:"icon",on:{click:t.clearHandler}},[n("use",{attrs:{"xlink:href":"#icon-clear"}})])]),n("ul",{staticClass:"sizes"},[n("li",{staticClass:"size thin action-item",class:{active:3===t.lineWidth},on:{click:function(e){t.lineWidth=3}}}),n("li",{staticClass:"size thick action-item",class:{active:6===t.lineWidth},on:{click:function(e){t.lineWidth=6}}})]),n("ul",{staticClass:"colors"},t._l(t.colorList,(function(e){return n("li",{key:e,staticClass:"color action-item",class:{active:e===t.strokeStyle},style:{backgroundColor:e},on:{click:function(n){return t.setColor(e)}}})})),0)])},i=[],s=n("2b0e"),c=s["a"].extend({data:function(){return{eraserEnabled:!1,lineWidth:3,strokeStyle:"",canvas:null,ctx:null,colorList:["#000000","#70FF56","#FB6164","#FFE931","#83FFB6","#FF7520"]}},mounted:function(){var t=this.getCanvasAndContext(),e=t.canvas,n=t.ctx;this.initCanvasBackground(e,n),this.disableScroll(),this.registerUserEvents(e,n)},methods:{getCanvasAndContext:function(){var t=this.$refs.canvas,e=t.getContext("2d");if(!e)throw new Error("浏览器太非主流了吧");return this.canvas=t,this.ctx=e,{canvas:t,ctx:e}},drawLine:function(t,e,n,a,i){t.beginPath(),t.moveTo(e,n),t.lineWidth=this.lineWidth||3,t.lineTo(a,i),t.stroke(),t.closePath()},registerUserEvents:function(t,e){var n=this,a=!1,i={x:0,y:0};void 0===document.body.ontouchstart?(t.addEventListener("mousedown",(function(t){a=!0;var s=t.offsetX,c=t.offsetY;n.eraserEnabled?e.clearRect(s-5,c-5,10,10):i={x:s,y:c}})),t.addEventListener("mousemove",(function(t){if(a){var s=t.offsetX,c=t.offsetY;if(n.eraserEnabled)e.clearRect(s-5,c-5,10,10);else{var o={x:s,y:c};n.drawLine(e,i.x,i.y,o.x,o.y),i=o}}})),t.addEventListener("mouseup",(function(t){a=!1}))):(t.addEventListener("touchstart",(function(t){a=!0;var s=t.touches[0].clientX,c=t.touches[0].clientY;n.eraserEnabled?e.clearRect(s-5,c-5,10,10):i={x:s,y:c}})),t.addEventListener("touchmove",(function(t){if(a){var s=t.touches[0].clientX,c=t.touches[0].clientY;if(n.eraserEnabled)e.clearRect(s-5,c-5,10,10);else{var o={x:s,y:c};n.drawLine(e,i.x,i.y,o.x,o.y),i=o}}})),t.addEventListener("touchend",(function(t){a=!1})))},downloadImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"untitled.jpeg",n=document.createElement("a");n.href=t,n.download=e,n.target="_blank",document.body.appendChild(n),n.click()},eraserHandler:function(){this.eraserEnabled=!0},brushHandler:function(){this.eraserEnabled=!1},clearHandler:function(){var t=this.ctx,e=this.canvas;t&&e&&t.clearRect(0,0,e.width,e.height)},downloadHandler:function(){var t=this.ctx,e=this.canvas;if(t&&e){var n=e.toDataURL("image/png");this.downloadImage(n,"我的画-在线画板.png")}},setColor:function(t){this.strokeStyle=t,this.ctx&&this.changeCtxStrokeStyle(this.ctx,t)},changeCtxStrokeStyle:function(t,e){t.strokeStyle=e},initCanvasBackground:function(t,e){e.fillStyle="white",e.fillRect(0,0,t.width,t.height)},disableScroll:function(){document.body.addEventListener("touchmove",(function(t){t.preventDefault()}))}}}),o=c,r=(n("07aa"),n("2877")),l=Object(r["a"])(o,a,i,!1,null,"31d75f4f",null);e["default"]=l.exports},c0a9:function(t,e,n){}}]);
//# sourceMappingURL=chunk-04df69a2.98ef61fd.js.map