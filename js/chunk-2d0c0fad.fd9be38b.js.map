{"version":3,"sources":["webpack:///./src/views/articles/canvas/chapterC02P04.vue"],"names":[],"mappings":"kHAAA,OAAe","file":"js/chunk-2d0c0fad.fd9be38b.js","sourcesContent":["export default \"<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">template</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">h2</span>&gt;</span>Canvas学习：绘制虚线<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">h2</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">p</span>&gt;</span>\\n      绘制虚线：\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">br</span> /&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">code</span>&gt;</span>{{ ctxDashLineCode }}<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">code</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">p</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">div</span> <span class=\\\"hljs-attr\\\">class</span>=<span class=\\\"hljs-string\\\">&quot;controllers&quot;</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">label</span>\\n        <span class=\\\"hljs-attr\\\">class</span>=<span class=\\\"hljs-string\\\">&quot;controller-item&quot;</span>\\n        <span class=\\\"hljs-attr\\\">:for</span>=<span class=\\\"hljs-string\\\">&quot;`dashLength${index}`&quot;</span>\\n        <span class=\\\"hljs-attr\\\">v-for</span>=<span class=\\\"hljs-string\\\">&quot;(lineDash, index) in lineDashs&quot;</span>\\n        <span class=\\\"hljs-attr\\\">:key</span>=<span class=\\\"hljs-string\\\">&quot;index&quot;</span>\\n      &gt;</span>\\n        <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">div</span>&gt;</span>{{ lineDash.value }}<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n        <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">input</span>\\n          <span class=\\\"hljs-attr\\\">type</span>=<span class=\\\"hljs-string\\\">&quot;range&quot;</span>\\n          <span class=\\\"hljs-attr\\\">:id</span>=<span class=\\\"hljs-string\\\">&quot;`dashLength${index}`&quot;</span>\\n          <span class=\\\"hljs-attr\\\">min</span>=<span class=\\\"hljs-string\\\">&quot;0&quot;</span>\\n          <span class=\\\"hljs-attr\\\">max</span>=<span class=\\\"hljs-string\\\">&quot;50&quot;</span>\\n          @<span class=\\\"hljs-attr\\\">input</span>=<span class=\\\"hljs-string\\\">&quot;draw&quot;</span>\\n          <span class=\\\"hljs-attr\\\">v-model</span>=<span class=\\\"hljs-string\\\">&quot;lineDash.value&quot;</span>\\n        /&gt;</span>\\n        <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">q-button</span> <span class=\\\"hljs-attr\\\">size</span>=<span class=\\\"hljs-string\\\">&quot;mini&quot;</span> <span class=\\\"hljs-attr\\\">round</span> <span class=\\\"hljs-attr\\\">:disabled</span>=<span class=\\\"hljs-string\\\">&quot;index &lt; 2&quot;</span> @<span class=\\\"hljs-attr\\\">click</span>=<span class=\\\"hljs-string\\\">&quot;removeDash(index)&quot;</span>&gt;</span>\\n          <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">div</span> <span class=\\\"hljs-attr\\\">class</span>=<span class=\\\"hljs-string\\\">&quot;rotate-45&quot;</span>&gt;</span>+<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n        <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">q-button</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">label</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">q-button</span> <span class=\\\"hljs-attr\\\">size</span>=<span class=\\\"hljs-string\\\">&quot;mini&quot;</span> <span class=\\\"hljs-attr\\\">round</span> @<span class=\\\"hljs-attr\\\">click</span>=<span class=\\\"hljs-string\\\">&quot;addDash&quot;</span>&gt;</span>+<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">q-button</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">canvas</span> <span class=\\\"hljs-attr\\\">ref</span>=<span class=\\\"hljs-string\\\">&quot;canvas&quot;</span> <span class=\\\"hljs-attr\\\">width</span>=<span class=\\\"hljs-string\\\">&quot;300&quot;</span> <span class=\\\"hljs-attr\\\">height</span>=<span class=\\\"hljs-string\\\">&quot;100&quot;</span>&gt;</span><span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">canvas</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">p</span>&gt;</span>\\n      在 Canvas 中，虚线可以通过\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">code</span>&gt;</span>setLineDash<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">code</span>&gt;</span>简单的实现。\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">p</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">p</span>&gt;</span>偶数位参数表示虚线长度，奇数表示实线。<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">p</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">div</span>&gt;</span>\\n<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">template</span>&gt;</span>\\n\\n<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">script</span> <span class=\\\"hljs-attr\\\">lang</span>=<span class=\\\"hljs-string\\\">&quot;ts&quot;</span>&gt;</span><span class=\\\"language-javascript\\\">\\n<span class=\\\"hljs-comment\\\">/* eslint-disable no-param-reassign */</span>\\n<span class=\\\"hljs-keyword\\\">import</span> <span class=\\\"hljs-title class_\\\">Vue</span> <span class=\\\"hljs-keyword\\\">from</span> <span class=\\\"hljs-string\\\">&#x27;vue&#x27;</span>;\\n\\n<span class=\\\"hljs-keyword\\\">export</span> <span class=\\\"hljs-keyword\\\">default</span> <span class=\\\"hljs-title class_\\\">Vue</span>.<span class=\\\"hljs-title function_\\\">extend</span>({\\n  <span class=\\\"hljs-title function_\\\">data</span>(<span class=\\\"hljs-params\\\"></span>) {\\n    <span class=\\\"hljs-keyword\\\">return</span> {\\n      <span class=\\\"hljs-attr\\\">lineDashs</span>: [\\n        {\\n          <span class=\\\"hljs-attr\\\">value</span>: <span class=\\\"hljs-number\\\">10</span>,\\n        },\\n        {\\n          <span class=\\\"hljs-attr\\\">value</span>: <span class=\\\"hljs-number\\\">30</span>,\\n        },\\n      ],\\n    };\\n  },\\n  <span class=\\\"hljs-attr\\\">computed</span>: {\\n    <span class=\\\"hljs-title function_\\\">ctxDashLineCode</span>(): string {\\n      <span class=\\\"hljs-keyword\\\">const</span> dashsCode = <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">lineDashParams</span>.<span class=\\\"hljs-title function_\\\">join</span>(<span class=\\\"hljs-string\\\">&#x27;, &#x27;</span>);\\n      <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-string\\\">`ctx.setLineDash([<span class=\\\"hljs-subst\\\">${dashsCode}</span>]);`</span>;\\n    },\\n    <span class=\\\"hljs-title function_\\\">lineDashParams</span>(): number[] {\\n      <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">lineDashs</span>.<span class=\\\"hljs-title function_\\\">map</span>(<span class=\\\"hljs-function\\\"><span class=\\\"hljs-params\\\">d</span> =&gt;</span> d.<span class=\\\"hljs-property\\\">value</span>);\\n    },\\n  },\\n  <span class=\\\"hljs-title function_\\\">mounted</span>(<span class=\\\"hljs-params\\\"></span>) {\\n    <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-title function_\\\">draw</span>();\\n  },\\n  <span class=\\\"hljs-attr\\\">methods</span>: {\\n    <span class=\\\"hljs-title function_\\\">removeDash</span>(<span class=\\\"hljs-params\\\">index: number</span>) {\\n      <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">lineDashs</span>.<span class=\\\"hljs-title function_\\\">splice</span>(index, <span class=\\\"hljs-number\\\">1</span>);\\n      <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-title function_\\\">draw</span>();\\n    },\\n\\n    <span class=\\\"hljs-title function_\\\">addDash</span>(<span class=\\\"hljs-params\\\"></span>) {\\n      <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">lineDashs</span>.<span class=\\\"hljs-title function_\\\">push</span>({ <span class=\\\"hljs-attr\\\">value</span>: <span class=\\\"hljs-number\\\">0</span> });\\n      <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-title function_\\\">draw</span>();\\n    },\\n\\n    <span class=\\\"hljs-title function_\\\">draw</span>(<span class=\\\"hljs-params\\\"></span>) {\\n      <span class=\\\"hljs-keyword\\\">const</span> canvas = <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">$refs</span>.<span class=\\\"hljs-property\\\">canvas</span> <span class=\\\"hljs-keyword\\\">as</span> HTMLCanvasElement;\\n      <span class=\\\"hljs-keyword\\\">const</span> ctx = canvas.<span class=\\\"hljs-title function_\\\">getContext</span>(<span class=\\\"hljs-string\\\">&#x27;2d&#x27;</span>);\\n      <span class=\\\"hljs-keyword\\\">if</span> (ctx) {\\n        ctx.<span class=\\\"hljs-title function_\\\">clearRect</span>(<span class=\\\"hljs-number\\\">0</span>, <span class=\\\"hljs-number\\\">0</span>, canvas.<span class=\\\"hljs-property\\\">width</span>, canvas.<span class=\\\"hljs-property\\\">height</span>);\\n        <span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-title function_\\\">drawDashedLine</span>(ctx);\\n      }\\n    },\\n    <span class=\\\"hljs-title function_\\\">drawDashedLine</span>(<span class=\\\"hljs-params\\\">ctx: CanvasRenderingContext2D</span>) {\\n      ctx.<span class=\\\"hljs-title function_\\\">beginPath</span>();\\n      <span class=\\\"hljs-comment\\\">// 在这里设置破折号分割格式</span>\\n      ctx.<span class=\\\"hljs-title function_\\\">setLineDash</span>(<span class=\\\"hljs-variable language_\\\">this</span>.<span class=\\\"hljs-property\\\">lineDashParams</span>);\\n      ctx.<span class=\\\"hljs-title function_\\\">moveTo</span>(<span class=\\\"hljs-number\\\">50</span>, <span class=\\\"hljs-number\\\">50</span>);\\n      ctx.<span class=\\\"hljs-title function_\\\">lineTo</span>(<span class=\\\"hljs-number\\\">250</span>, <span class=\\\"hljs-number\\\">50</span>);\\n      ctx.<span class=\\\"hljs-title function_\\\">stroke</span>();\\n    },\\n  },\\n});\\n</span><span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">script</span>&gt;</span>\\n\\n<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-name\\\">style</span> <span class=\\\"hljs-attr\\\">lang</span>=<span class=\\\"hljs-string\\\">&quot;less&quot;</span> <span class=\\\"hljs-attr\\\">scoped</span>&gt;</span><span class=\\\"language-css\\\">\\n<span class=\\\"hljs-selector-class\\\">.controllers</span> {\\n  <span class=\\\"hljs-attribute\\\">margin</span>: <span class=\\\"hljs-number\\\">1em</span> <span class=\\\"hljs-number\\\">0</span>;\\n  <span class=\\\"hljs-attribute\\\">display</span>: flex;\\n  <span class=\\\"hljs-attribute\\\">justify-content</span>: flex-start;\\n  <span class=\\\"hljs-attribute\\\">flex-wrap</span>: wrap;\\n  user-select: none;\\n}\\n\\n<span class=\\\"hljs-selector-class\\\">.controller-item</span> {\\n  <span class=\\\"hljs-attribute\\\">margin-top</span>: <span class=\\\"hljs-number\\\">0.5em</span>;\\n  <span class=\\\"hljs-attribute\\\">flex-basis</span>: <span class=\\\"hljs-number\\\">33%</span>;\\n}\\n\\n<span class=\\\"hljs-selector-class\\\">.rotate-45</span> {\\n  <span class=\\\"hljs-attribute\\\">transform</span>: <span class=\\\"hljs-built_in\\\">rotate</span>(<span class=\\\"hljs-number\\\">45deg</span>);\\n}\\n</span><span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-name\\\">style</span>&gt;</span>\\n\""],"sourceRoot":""}